<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-10-16 Sat 23:15 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Greg Davidson" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org875fbe9">1. Computing Magic Meeting Notes, Saturday 9 October 2021</a>
<ul>
<li><a href="#org08fa3a0">1.1. What should you do between Now and Next Saturday?</a></li>
<li><a href="#orga8caa57">1.2. What's coming up next?</a></li>
<li><a href="#orgc4f4e76">1.3. Notes from Today's Session</a>
<ul>
<li><a href="#org12d8e31">1.3.1. Support for the Tutorial</a></li>
<li><a href="#org5853f32">1.3.2. Declarative vs. Procedural</a></li>
<li><a href="#orgadf79ad">1.3.3. Imperative vs. Functional</a></li>
<li><a href="#orgf875298">1.3.4. Review of struct</a></li>
<li><a href="#orgd802831">1.3.5. Review of Cons, Lists, Quasiquotes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org875fbe9" class="outline-2">
<h2 id="org875fbe9"><span class="section-number-2">1</span> Computing Magic Meeting Notes, Saturday 9 October 2021</h2>
<div class="outline-text-2" id="text-1">
<p>
Notes from the <a href="https://github.com/GregDavidson/computing-magic">Computing Magic Project</a>.
</p>
</div>

<div id="outline-container-org08fa3a0" class="outline-3">
<h3 id="org08fa3a0"><span class="section-number-3">1.1</span> What should you do between Now and Next Saturday?</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Continue exploring the tutorial <a href="https://docs.racket-lang.org/continue/index.html">Web Applications in Racket</a>!
</p>
<ul class="org-ul">
<li>If you run into a roadblock, share on our Discord's #computing-magic channel</li>
<li>The goal is to finish the tutorial this week, but we'll see!</li>
</ul>

<p>
Continue exploring the <a href="https://github.com/GregDavidson/on-lisp/blob/main/vis-mce.rkt">Meta-Circular Evaluator</a>.
</p>
<ul class="org-ul">
<li>Is it giving you insight into how Lisps work?</li>
<li>Can you make it do any new tricks?</li>
<li>Share what you're discovering on our #computing-magic channel</li>
</ul>
</div>
</div>

<div id="outline-container-orga8caa57" class="outline-3">
<h3 id="orga8caa57"><span class="section-number-3">1.2</span> What's coming up next?</h3>
<div class="outline-text-3" id="text-1-2">
<p>
After we finish the Web tutorial - which covers much more than mere Web
Appplications, of course! - we're going to start moving to a complete computing
environment. Racket will be our front-end language but we'll shift away from
DrRacket towards a more complete development environment.  We'll learn an
extensible, object-relational database and we'll start to put everything we've
learned and everything we will be learning into an integrated framework.
</p>
</div>
</div>

<div id="outline-container-orgc4f4e76" class="outline-3">
<h3 id="orgc4f4e76"><span class="section-number-3">1.3</span> Notes from Today's Session</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Various things came up from attempts to work through the Web tutorial which led
to some interesting mini-presentations and discussions which will be captured
here.
</p>
</div>

<div id="outline-container-org12d8e31" class="outline-4">
<h4 id="org12d8e31"><span class="section-number-4">1.3.1</span> Support for the Tutorial</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
The tutorial uses the special racket language
</p>
<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3; font-weight: bold;">#lang</span> <span style="color: #715ab1;">web-server/insta</span>
</pre>
</div>
<p>
which automagically pulls in a number of racket packages
and sets things up so that when you define a procedure named <code>start</code>, it will
</p>
<ol class="org-ol">
<li>Create a simple Web Server in Racket</li>
<li>Fire up your default browser connected to the Racket Web Server</li>
<li>Call the procedure you named <code>start</code> with the browser's <code>request</code></li>
<li>Send a response to your browser</li>
</ol>

<p>
The purpose of all of this is so that the tutorial can start you out with a
working web server in only this much code:
</p>
<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3; font-weight: bold;">#lang</span> <span style="color: #715ab1;">web-server/insta</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">define</span> <span style="color: #6c3163;">(</span><span style="color: #6c3163; font-weight: bold;">start</span> request<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>response/xexpr
   '<span style="color: #2d9574;">(</span>html
     <span style="color: #67b11d;">(</span>head <span style="color: #b1951d;">(</span>title <span style="color: #2d9574;">"My Blog"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
     <span style="color: #67b11d;">(</span>body <span style="color: #b1951d;">(</span>h1 <span style="color: #2d9574;">"Under construction"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<p>
and then incrementally refine it.
</p>

<p>
The problem is that so much is being hidden that it can be hard to know what's
going on!
</p>

<p>
I recommend following the tutorial as written, but I provide you with a companion
Racket program which makes things a bit more explicit: <a href="https://github.com/GregDavidson/computing-magic/blob/main/web-play.rkt">web-play.rkt</a>
</p>
<ul class="org-ul">
<li>Download it, run it, and play with it a bit!</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="orged50d93"></a>xexpr, contracts and all that<br />
<div class="outline-text-5" id="text-1-3-1-1">
<p>
Hopefully the use of the <i>xexpr</i> notation in the tutorial is clear by example,
i.e. that we work with <i>html</i> and <i>xml</i> using expresions like
</p>
<div class="org-src-container">
<pre class="src src-racket">'<span style="color: #3a81c3;">(</span>div <span style="color: #6c3163;">(</span><span style="color: #2d9574;">(</span><span style="color: #3a81c3;">class</span> <span style="color: #2d9574;">"post"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span> <span style="color: #2d9574;">"First post!"</span> <span style="color: #6c3163;">(</span>p <span style="color: #2d9574;">"This is a first post."</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<p>
which will be converted automagically to regular <i>html</i> or <i>xml</i> like this
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #6c3163; font-weight: bold;">div</span> <span style="color: #715ab1;">class</span>=<span style="color: #2d9574;">"post"</span>&gt;First post!&lt;<span style="color: #6c3163; font-weight: bold;">p</span>&gt;This is a first post.&lt;/<span style="color: #6c3163; font-weight: bold;">p</span>&gt;&lt;/<span style="color: #6c3163; font-weight: bold;">div</span>&gt;
</pre>
</div>

<p>
The precise definition of the xexpr notation is given by the recursive contract 
</p>
<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">define</span> <span style="color: #715ab1;">xexpr/c</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">flat-rec-contract</span>
   xexpr
   <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">or/c</span> <span style="color: #3a81c3;">string?</span>
         <span style="color: #67b11d;">(</span><span style="color: #3a81c3;">cons/c</span> <span style="color: #3a81c3;">symbol?</span> <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">listof</span> xexpr<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span><span style="color: #3a81c3;">cons/c</span> <span style="color: #3a81c3;">symbol?</span>
                 <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">cons/c</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">listof</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">list/c</span> <span style="color: #3a81c3;">symbol?</span> <span style="color: #3a81c3;">string?</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
                         <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">listof</span> xexpr<span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
which is automatically brought in by the framework: you aren't supposed to put
this in your program and you don't have to fully understand it!
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org5853f32" class="outline-4">
<h4 id="org5853f32"><span class="section-number-4">1.3.2</span> Declarative vs. Procedural</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
Computers are wired to perform computation by executing large numbers of very
simple operations (computational steps) very fast. Machine-code programs consist
of sequences of instructions which correspond to these hard-wired operations.
Assembly Language gives symbolic names to the bit-patterns of machine code,
allowing human beings to better understand them.
</p>

<p>
Example from x86/IA-32 machine code:
</p>
<dl class="org-dl">
<dt>intention</dt><dd>put the value 97 (hexadecimal 61) into register AL</dd>
<dt>instruction in binary</dt><dd>10110000 01100001</dd>
<dt>same instruction in hexadecimal</dt><dd>B0 61</dd>
<dt>same instruction in assembly language</dt><dd>MV AL, 61h</dd>
</dl>

<p>
Higher-level procedural languages can specify these operations in larger
computational steps. These steps can then either be incrementally decoded and
performed by an <i>interpreter</i> program or translated by a <i>compiler</i> program into
machine code which can then be executed directly by the machine. Programs run by
an interpreter usually run 10 to 100 times slower than programs translated into
machine code - we don't usually count the time it takes the compiler to do the
translation though, since that can be amortized over many executions of the
program.
</p>

<p>
In <b>Procedural Programming</b>, the human programmer writes a program in either a
high-level or low-level procedural language. In other words, the programmer
specifies the computational steps the program will perform to solve some
specified problem. High-Level Languages make Procedural Programming much easier
than it used to be. However, the resulting program is often very complex, needs
commentary for humans to understand its intent and often contains bugs which
cause it to fail to work as intended. In Procedural Programing, programmers
spend much more time testing their program trying to find bugs and then
debugging their program than they spent writing the program in the first case.
</p>

<p>
In <b>Declarative Programming</b>, the human programmer writes a specification of
what they want the program to do, but without saying how the program should
accomplish it. An automatic programming system then synthesizes a procedure for
carrying out the programmer's intent.
</p>

<p>
Declarative programming systems include:
</p>
<ul class="org-ul">
<li>Formulas in Spreadsheets</li>
<li>SQL in Relational Databases</li>
<li>Pattern matching with Regular expressions</li>
<li>etc.</li>
</ul>

<p>
&#x2013; Given table weather with these rows:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">city</th>
<th scope="col" class="org-right">temp<sub>lo</sub></th>
<th scope="col" class="org-right">temp<sub>hi</sub></th>
<th scope="col" class="org-right">prcp</th>
<th scope="col" class="org-right">date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">San Francisco</td>
<td class="org-right">46</td>
<td class="org-right">50</td>
<td class="org-right">0.25</td>
<td class="org-right">1994-11-27</td>
</tr>

<tr>
<td class="org-left">San Francisco</td>
<td class="org-right">43</td>
<td class="org-right">57</td>
<td class="org-right">0</td>
<td class="org-right">1994-11-29</td>
</tr>

<tr>
<td class="org-left">Hayward</td>
<td class="org-right">37</td>
<td class="org-right">54</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">1994-11-29</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- get the maximum low temperature observed in each city</span>
<span style="color: #3a81c3; font-weight: bold;">SELECT</span> city, <span style="color: #3a81c3;">max</span><span style="color: #3a81c3;">(</span>temp_lo<span style="color: #3a81c3;">)</span>
    <span style="color: #3a81c3; font-weight: bold;">FROM</span> weather
    <span style="color: #3a81c3; font-weight: bold;">GROUP</span> <span style="color: #3a81c3; font-weight: bold;">BY</span> city;
</pre>
</div>

<p>
returns
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">city</th>
<th scope="col" class="org-right">max</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Hayward</td>
<td class="org-right">37</td>
</tr>

<tr>
<td class="org-left">San Francisco</td>
<td class="org-right">46</td>
</tr>
</tbody>
</table>


<p>
Exercise to the reader: Try writing a procedural program to do this in your
favorite language. What are the pros and cons?
</p>

<p>
When a Declarative Programming Language matches a problem domain well it can be
enormously more productive for programmers. The program specification is short
and closely related to the domain. The automatically generated program is
guaranteed to be correct - although the specification might be wrong, so some
testing might still be a good idea.
</p>

<p>
The biggest potential drawback of Declarative Programming is if the
automatically generated procedural program is inefficient. Declarative
programmers have to understand the limitations of their tools. Different ways of
stating the specification can produce very differently performing programs!
</p>
</div>
</div>

<div id="outline-container-orgadf79ad" class="outline-4">
<h4 id="orgadf79ad"><span class="section-number-4">1.3.3</span> Imperative vs. Functional</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
<i>Imperative Programs</i> view memory as consisting of modifiable variables and
modifiable data structures. Imperative programs consist of a series of
statements which
</p>
<ol class="org-ol">
<li>Read in input data into memory in some convenient arrangment</li>
<li>Modify memory until desired results appear</li>
<li>Write out the results to a desired output device</li>
</ol>

<p>
<i>Functional Programs</i> consist of <i>Functional Procedures</i>. Each Functional
Procedure computes 1 or more output values from 1 or more input arguments. As in
a mathematical function, the same result(s) will always be produced given the
same arguments.  Functional Procedures have no <i>side-effect</i>.
</p>

<p>
<i>Side-Effects</i> of running an Imperative Procedure include
</p>
<ol class="org-ol">
<li>Modification of memory outside of the Procedure</li>
<li>Reading data from an Input Device</li>
<li>Writing data to an Output Device</li>
</ol>

<p>
The order in which Statements and Procedures are called in <i>Imperative
Procedures</i> will typically change the result of the program.
</p>

<p>
The order in which Procedures are called in a purely Functional Program may
affect the efficiency of the program, but will not change its results.
</p>

<p>
Some programming languages, such as <i>Haskell</i> and <i>Agda</i>, only allow expressing
Functional Programs. Programming in such languages is very good training in
learning how to write short, clear, efficient programs which need little to no
debugging.
</p>

<p>
Lisps are hybrid languages. Lisps are very good at expressing Functional
Programs but also allow programmers to write <i>Imperative Code</i>. Great Lisp
programmers are careful to keep their programs mostly Functional and to
carefully document and justify any imperative code in their programs.
</p>
</div>
</div>

<div id="outline-container-orgf875298" class="outline-4">
<h4 id="orgf875298"><span class="section-number-4">1.3.4</span> Review of struct</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
The simplest use of <code>struct</code> is to wrap up one or more values into
a composite object which will have a brand new and distinct datatype.
</p>

<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">struct</span> post <span style="color: #6c3163;">(</span>title body<span style="color: #6c3163;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Creates a new type, distinct from all others</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Creates functions post, post?, post-title, post-body</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">procedure post is the constructor,</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">the only procedure that can create posts</span>
<span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">define</span> <span style="color: #715ab1;">a-post</span> <span style="color: #2d9574;">(</span>post <span style="color: #2d9574;">"Some Title"</span> <span style="color: #2d9574;">"Something about it"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">&gt;</span> a-post
#&lt;post&gt; <span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">an opaque object</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">post? is a type predicate, returning #t = true for posts</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span>post? a-post<span style="color: #6c3163;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">is a-post bound to a post?</span>
<span style="color: #2e8b57;">#t</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">and #f = false for anything not created by procedure post</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span>post? <span style="color: #2d9574;">"Anything other th"</span><span style="color: #6c3163;">)</span>
<span style="color: #2e8b57;">#f</span> <span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">#f = false</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Posts can be deconstructed by selectors</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">struct creates a selector for each named field:</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span>post-title a-post<span style="color: #6c3163;">)</span>
<span style="color: #2d9574;">"Some Title"</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span>post-body a-post<span style="color: #6c3163;">)</span>
<span style="color: #2d9574;">"Something about it"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd802831" class="outline-4">
<h4 id="orgd802831"><span class="section-number-4">1.3.5</span> Review of Cons, Lists, Quasiquotes</h4>
<div class="outline-text-4" id="text-1-3-5">
</div>
<ol class="org-ol">
<li><a id="org250d9a1"></a>Pairs aka Cons Cells<br />
<div class="outline-text-5" id="text-1-3-5-1">
<p>
In a more modern languages, pairs (representing a pair of values) and lists
(representing a sequence of values) would be distinct types. In Lisp these two
concepts overlap.
</p>

<p>
Procedure <code>cons</code> creates pairs
</p>
<div class="org-src-container">
<pre class="src src-racket"><span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">the pair constructor is function cons</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">cons</span> <span style="color: #2e8b57;">'this</span> <span style="color: #2e8b57;">'that</span><span style="color: #3a81c3;">)</span>
'<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">this</span> . that<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">define</span> <span style="color: #715ab1;">a-pair</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">cons</span> <span style="color: #2e8b57;">'this</span> <span style="color: #2e8b57;">'that</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">&gt;</span> a-pair
'<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">this</span> . that<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">pair?</span> a-pair<span style="color: #3a81c3;">)</span>
<span style="color: #2e8b57;">#t</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">pair?</span> <span style="color: #2d9574;">"hello world"</span><span style="color: #3a81c3;">)</span>
<span style="color: #2e8b57;">#f</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">the destructors are car and cdr</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">car</span> a-pair<span style="color: #3a81c3;">)</span>
<span style="color: #2e8b57;">'this</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">cdr</span> a-pair<span style="color: #3a81c3;">)</span>
<span style="color: #2e8b57;">'that</span>
</pre>
</div>

<p>
Notice that pairs have a syntax similar to a list, except with a dot between the
two components.
</p>

<p>
Pairs are also called "cons cells".  If pairs didn't exist in Racket we could create almost the same thing by saying 
</p>
<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">struct</span> pair <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">car</span> <span style="color: #3a81c3;">cdr</span><span style="color: #6c3163;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>How would these pairs be different?</li>
<li>Could we fix it up to make them behave identically to cons cells?</li>
</ul>
</div>
</li>

<li><a id="orgc7b1c47"></a>Lists<br />
<div class="outline-text-5" id="text-1-3-5-2">
<p>
A <i>list</i> is either the empty list <code>()</code> or a sequence of <i>pairs</i> where the <i>car</i>
of each pair is a list element and the <code>cdr</code> each pair is the <i>rest of the
list</i>.
</p>

<p>
Lists can be created either by <code>list</code> or nested <code>cons</code> forms. Literal lists can
be with list or pair syntax. Lists can be arbitarily nested.
</p>

<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">list</span> <span style="color: #2e8b57;">'one</span> <span style="color: #2e8b57;">'two</span> <span style="color: #2e8b57;">'three</span><span style="color: #3a81c3;">)</span>
'<span style="color: #3a81c3;">(</span>one two three<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">cons</span> <span style="color: #2e8b57;">'one</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">cons</span> <span style="color: #2e8b57;">'two</span> <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">cons</span> <span style="color: #2e8b57;">'three</span> '<span style="color: #67b11d;">()</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
'<span style="color: #3a81c3;">(</span>one two three<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">&gt;</span> '<span style="color: #3a81c3;">(</span>one two three<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">a list literal</span>
'<span style="color: #3a81c3;">(</span>one two three<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">&gt;</span> '<span style="color: #3a81c3;">(</span>one . <span style="color: #6c3163;">(</span>two . <span style="color: #2d9574;">(</span>three . <span style="color: #67b11d;">()</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">three nested pair literals</span>
'<span style="color: #3a81c3;">(</span>one two three<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">produces the same result!</span>
</pre>
</div>

<p>
Since Lists are really just a sequence of pairs, they can be deconstructed with
<code>car</code> and <code>cons</code>.
</p>

<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">define</span> <span style="color: #715ab1;">shopping</span> '<span style="color: #6c3163;">(</span>bread <span style="color: #2d9574;">(</span><span style="color: #4e3163;">1</span> gallon milk<span style="color: #2d9574;">)</span> <span style="color: #2d9574;">(</span>some fruit<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">&gt;</span> shopping
'<span style="color: #6c3163;">(</span>bread <span style="color: #2d9574;">(</span><span style="color: #4e3163;">1</span> gallon milk<span style="color: #2d9574;">)</span> <span style="color: #2d9574;">(</span>some fruit<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">pair?</span> shopping<span style="color: #6c3163;">)</span>
<span style="color: #2e8b57;">#t</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">car</span> shopping<span style="color: #6c3163;">)</span>
bread
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">cdr</span> shopping<span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span><span style="color: #2d9574;">(</span><span style="color: #4e3163;">1</span> gallon milk<span style="color: #2d9574;">)</span> <span style="color: #2d9574;">(</span>some fruit<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">car</span> <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">cdr</span> shopping<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span><span style="color: #4e3163;">1</span> gallon milk<span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">cons</span> <span style="color: #2e8b57;">'grapes</span> shopping<span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>grapes bread <span style="color: #2d9574;">(</span><span style="color: #4e3163;">1</span> gallon milk<span style="color: #2d9574;">)</span> <span style="color: #2d9574;">(</span>some fruit<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">&gt;</span> shopping
'<span style="color: #6c3163;">(</span>bread <span style="color: #2d9574;">(</span><span style="color: #4e3163;">1</span> gallon milk<span style="color: #2d9574;">)</span> <span style="color: #2d9574;">(</span>some fruit<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
</pre>
</div>

<p>
There's a special predicate for empty lists
</p>
<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">null?</span> '<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span>
<span style="color: #2e8b57;">#t</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">null?</span> '<span style="color: #6c3163;">(</span><span style="color: #4e3163;">1</span> <span style="color: #4e3163;">2</span> <span style="color: #4e3163;">3</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #2e8b57;">#f</span>
</pre>
</div>

<p>
And a variety of other handy procedures
</p>
<div class="org-src-container">
<pre class="src src-racket"><span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">define</span> <span style="color: #715ab1;">a-list</span> '<span style="color: #6c3163;">(</span><span style="color: #4e3163;">1</span> <span style="color: #4e3163;">2</span> <span style="color: #4e3163;">3</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">length</span> a-list<span style="color: #3a81c3;">)</span>
<span style="color: #4e3163;">3</span>
<span style="color: #3a81c3;">&gt;</span> <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">append</span> a-list '<span style="color: #6c3163;">(</span>a b c<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
'<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span> <span style="color: #4e3163;">2</span> <span style="color: #4e3163;">3</span> a b c<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">which doesn't change a-list, of course</span>
<span style="color: #3a81c3;">&gt;</span> a-list
'<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span> <span style="color: #4e3163;">2</span> <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org251f1f8"></a>Quasiquotes<br />
<div class="outline-text-5" id="text-1-3-5-3">
<p>
Everything inside of a quoted list is also quoted.  Quasiquotes let us
splice computed values into an otherwise literal list structure.
</p>

<div class="org-src-container">
<pre class="src src-racket"><span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">quasiquotes use the backwards quote symbol </span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">define</span> <span style="color: #715ab1;">milk</span> '<span style="color: #6c3163;">(</span><span style="color: #4e3163;">2</span> liters milk<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">quasiquote seems to work just like regular quote</span>
<span style="color: #3a81c3;">&gt;</span> `<span style="color: #3a81c3;">(</span>bread milk fruit<span style="color: #3a81c3;">)</span>
'<span style="color: #3a81c3;">(</span>bread milk fruit<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">but we can selectively evaluate elements</span>
<span style="color: #3a81c3;">&gt;</span> `<span style="color: #3a81c3;">(</span>bread ,milk fruit<span style="color: #3a81c3;">)</span>
'<span style="color: #3a81c3;">(</span>bread <span style="color: #6c3163;">(</span><span style="color: #4e3163;">2</span> liters milk<span style="color: #6c3163;">)</span> fruit<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">and even splice in a sublist</span>
<span style="color: #3a81c3;">&gt;</span> `<span style="color: #3a81c3;">(</span>bread ,@milk fruit<span style="color: #3a81c3;">)</span>
'<span style="color: #3a81c3;">(</span>bread <span style="color: #4e3163;">2</span> liters milk fruit<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Greg Davidson</p>
<p class="date">Created: 2021-10-16 Sat 23:15</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
